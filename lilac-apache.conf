# Apache Virtual Host Configuration for LILAC Application
# Copy this file to your Apache conf directory (usually /conf/extra/ or /conf/sites-available/)

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "C:\xampp\htdocs\LILAC-v.2.1"
    
    # Directory configuration
    <Directory "C:\xampp\htdocs\LILAC-v.2.1">
        AllowOverride All
        Require all granted
        Options Indexes FollowSymLinks
    </Directory>
    
    # Enable PHP processing
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>
    
    # Set default index files
    DirectoryIndex pages/index.html pages/dashboard.html index.php
    
    # Error and access logs
    ErrorLog "logs/lilac_error.log"
    CustomLog "logs/lilac_access.log" combined
    
    # PHP configuration
    php_value upload_max_filesize 10M
    php_value post_max_size 10M
    php_value max_execution_time 300
    php_value memory_limit 256M
    php_value display_errors Off
    php_value log_errors On
    php_value error_log "logs/php_errors.log"
    
    # Security headers
    <IfModule mod_headers.c>
        Header always set X-Content-Type-Options nosniff
        Header always set X-Frame-Options SAMEORIGIN
        Header always set X-XSS-Protection "1; mode=block"
    </IfModule>
    
    # CORS headers for API (important for remote access)
    <IfModule mod_headers.c>
        Header always set Access-Control-Allow-Origin "*"
        Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE"
        Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, X-User, X-Role"
    </IfModule>
    
    # Redirect root to dashboard
    RedirectMatch ^/$ /pages/dashboard.html
    
    # API routes - handled by .htaccess file
</VirtualHost>

# Virtual host for port 8000 - for remote access
<VirtualHost *:8000>
    ServerName 0.0.0.0:8000
    DocumentRoot "C:\xampp\htdocs\LILAC-v.2.1"
    
    # Directory configuration for remote access
    <Directory "C:\xampp\htdocs\LILAC-v.2.1">
        AllowOverride All
        Require all granted
        Options Indexes FollowSymLinks
    </Directory>
    
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>
    
    DirectoryIndex pages/index.html pages/dashboard.html index.php
    ErrorLog "logs/lilac_error_8000.log"
    CustomLog "logs/lilac_access_8000.log" combined
    
    php_value upload_max_filesize 10M
    php_value post_max_size 10M
    php_value max_execution_time 300
    php_value memory_limit 256M
    
    # CORS headers for remote access
    <IfModule mod_headers.c>
        Header always set Access-Control-Allow-Origin "*"
        Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE"
        Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, X-User, X-Role"
    </IfModule>
    
    RedirectMatch ^/$ /pages/dashboard.html
</VirtualHost>
